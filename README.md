# curly-potato
Application for testing cluster failover from master and replica.

## Что делает:
  + Генерирует ___1000000___ тестовых сущностей, представляющих запись в БД;
  + Очищаем таблицу в мастере;
  + Каждая тестовая сущность записывается в БД асинхронно, каждая в своем потоке;
  + Объем пула потоков - 100 (дефолтное значение в конфиге постгреса, которое можно изменить);
  + Случайным образом выбирает поток, в котором произойдет failover (через ssh отрубается master);
  + Коллектим каждую тестовую сущность, транзакция которой успешно выполнена;
  + Читаем все данные с slave и сравниваем вхождения с коллекцией сущностей транзакции;
  + Тест ~~падает~~ не падает, все выполнено успешно (но это не точно).

Build tool - __Gradle__.

## Frameworks:

  + org.jetbrains.exposed:exposed-core/dao/jdbc:0.24.1;
  + org.postgresql:postgresql:42.2.2;
  + junit:junit:4.12;
  + https://github.com/jkelly467/kossh.
